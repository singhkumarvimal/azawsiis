# Deploying Azure vs AWS Comparison Website to Azure App Service

This guide outlines the steps to deploy your built React application to Azure App Service, a fully managed platform for hosting web applications.

## Prerequisites

1.  **Azure Account:** You need an active Azure subscription.
2.  **Azure CLI (Optional but Recommended):** For command-line deployments, install Azure CLI on your local machine.
3.  **Built Application:** Ensure you have the production-ready build of your React application (the `dist` folder generated by `pnpm run build`).

## Deployment Methods

There are several ways to deploy a static React application to Azure App Service. Here are the most common ones:

### Method 1: Manual Deployment (FTP/Kudu)

This is suitable for quick, one-time deployments.

1.  **Create an Azure App Service:**
    *   Go to the Azure Portal (portal.azure.com).
    *   Click `+ Create a resource` -> `Web` -> `Web App`.
    *   Fill in the details: Subscription, Resource Group, Name (e.g., `azure-aws-comparison-app`), Publish (Code), Runtime stack (Node.js), Operating System (Linux or Windows, Linux is generally preferred for Node.js apps), Region, App Service Plan.
    *   Click `Review + create` and then `Create`.
2.  **Get Deployment Credentials:**
    *   Once the App Service is created, navigate to its overview page in the Azure Portal.
    *   Go to `Deployment Center` or `Deployment credentials` (under `Deployment`).
    *   Note down the FTP/FTPS hostname, username, and password.
3.  **Upload `dist` Folder Contents:**
    *   Using an FTP client (like FileZilla) or the Kudu console (accessible via `https://<your-app-name>.scm.azurewebsites.net`), connect to your App Service.
    *   Navigate to the `site/wwwroot` directory.
    *   **Delete all existing files** in `wwwroot` (if any).
    *   **Upload the entire content of your local `dist` folder** (not the `dist` folder itself, but its contents) into the `wwwroot` directory.
4.  **Configure Startup Command (for Linux App Service):**
    *   If you chose Linux as the OS, you might need to configure a startup command to serve static files.
    *   In the Azure Portal, go to your App Service -> `Configuration` -> `General settings`.
    *   Set the `Startup Command` to something like `pm2 serve /home/site/wwwroot --no-daemon --spa` (if using PM2 for static serving, which is common for Node.js apps on Linux App Service). If you're just serving static files, Azure App Service often handles this automatically for Node.js apps if `index.html` is at the root.

### Method 2: Azure CLI Deployment

This method is more scriptable and efficient for repeated deployments.

1.  **Login to Azure CLI:**
    ```bash
    az login
    ```
2.  **Set Subscription (if you have multiple):**
    ```bash
    az account set --subscription "Your Subscription Name or ID"
    ```
3.  **Create an App Service Plan (if you don't have one):**
    ```bash
    az appservice plan create --name <your-app-service-plan> --resource-group <your-resource-group> --sku F1 --is-linux
    ```
    (Replace `F1` with your desired pricing tier, e.g., `B1`, `S1`)
4.  **Create the Web App:**
    ```bash
    az webapp create --resource-group <your-resource-group> --plan <your-app-service-plan> --name <your-app-name> --runtime "NODE|18-lts"
    ```
    (Replace `NODE|18-lts` with your preferred Node.js version)
5.  **Deploy the Built Application:**
    *   First, ensure you are in your project's root directory where the `dist` folder resides.
    *   Then, run the deployment command:
        ```bash
        az webapp deploy --resource-group <your-resource-group> --name <your-app-name> --src-path ./dist --clean true
        ```
        The `--src-path ./dist` specifies that the contents of the `dist` folder should be deployed. `--clean true` ensures that existing files in `wwwroot` are removed before deployment.

### Method 3: Continuous Integration/Continuous Deployment (CI/CD)

For automated deployments whenever you push changes to your Git repository (e.g., GitHub, Azure DevOps Repos), set up a CI/CD pipeline.

1.  **Azure DevOps Pipelines:**
    *   Connect your Git repository to Azure DevOps.
    *   Create a new pipeline.
    *   Use a Node.js template.
    *   Add tasks to:
        *   Install dependencies (`npm install` or `pnpm install`)
        *   Build the React application (`npm run build` or `pnpm run build`)
        *   Deploy to Azure Web App (use the `Azure Web App deploy` task, pointing it to your `dist` folder).
2.  **GitHub Actions:**
    *   Azure provides direct integration with GitHub Actions.
    *   In your Azure App Service in the portal, go to `Deployment Center`.
    *   Select `GitHub` as the source and follow the prompts to set up a workflow file that builds and deploys your React app.

## Important Considerations

*   **Custom Domains:** You can configure custom domains for your App Service in the Azure Portal.
*   **SSL/TLS:** Azure App Service provides free managed certificates for custom domains.
*   **Environment Variables:** Manage environment variables for your React app (e.g., API endpoints) in App Service `Configuration` -> `Application settings`.
*   **Routing (SPA):** For single-page applications (SPAs) like React apps, you might need to configure a rewrite rule on the App Service to redirect all unmatched paths to `index.html`. This is typically done by adding a `web.config` file (for Windows App Service) or configuring the startup command (for Linux App Service with a static file server like `serve` or `pm2`).
    *   **For Windows App Service:** Create a `web.config` file in your `dist` folder (before deployment) with content similar to this:
        ```xml
        <?xml version="1.0" encoding="utf-8"?>
        <configuration>
          <system.webServer>
            <rewrite>
              <rules>
                <rule name="React Routes" stopProcessing="true">
                  <match url=".*" />
                  <conditions logicalGrouping="MatchAll">
                    <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
                    <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
                  </conditions>
                  <action type="Rewrite" url="/index.html" />
                </rule>
              </rules>
            </rewrite>
          </system.webServer>
        </configuration>
        ```
    *   **For Linux App Service:** The `pm2 serve --spa` command handles this automatically.

